<script type="text/javascript">
    RED.nodes.registerType('mamPublish',{
      category: 'IOTA-api',
      color: '#f6bbcf',
      defaults: {
            iotaNode: {value: "", type:"iota-server"},
            channelseed:{value:"VAEOUKFNMLFLCHHJSJYQXNS9HXCTVVITMLR9SXBVTGRTZHGXFOIUHETEIG9EWVORNLYXUGENZ9UHEOOTE"},
            mode: {value: 'public'},
            sidkey: {value: null},
            tag: {value: "FROMNODERED"},
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "iota.png",
        label: function() {
            return this.name||"mamPublish";
        }
    });
</script>

<script type="text/x-red" data-template-name="mamPublish">
    <div class="form-row">
      <label for="node-function-iotaNode"><i class="fa fa-server"></i> MAMnode</label>
      <input type="text" id="node-input-iotaNode" placeholder="MAM node">
    </div>
    <div class="form-row">
      <label for="node-function-channelseed"><i class="fa fa-server"></i> MAMnode</label>
      <input type="text" id="node-input-channelseed" placeholder="MAM seed">
    </div>
    <div class="form-row">
      <label for="node-function-mode"><i class="icon-tag"></i> Channel mode</label>
      <input type="text" id="node-input-mode">
    </div>
    <div class="form-row">
      <label for="node-function-sidkey"><i class="icon-tag"></i> Sidkey</label>
      <input type="text" id="node-input-sidkey">
    </div>
    <div class="form-row">
      <label for="node-function-tag"><i class="icon-tag"></i> Tag</label>
      <input type="text" id="node-input-tag">
    </div>
    <div class="form-row">
      <label for="node-function-name"><i class="icon-tag"></i> name</label>
      <input type="text" id="node-input-name">
    </div>
</script>

<script type="text/x-red" data-help-name="mamPublish">
    <p>MAM publish node</p>
    <b>MAMnode: </b> Setup IOTA server provider settings like host, port (14265 or 443 - are usual). Default value pow.iota.community:443 <br><br>
    <b>Channelmode: </b> String Intended channel mode. Can be only: public, private or restricted.<br><br>
    <b>SidKey:</b> String Tryte-encoded encryption key, any length. Required for restricted mode.<br><br>
    <b>Tag:</b> Enter a Tag for transaction.<br><br>
   <p>In case of success <code>msg.payload</code> is set to data.</p>
   <p>Please visit IOTA Dance to see all server prividers on this: <a href="https://iota.dance/" target="_blank">link</a>.</p>
   <p>Follow the message in: <a href="https://mam-explorer.firebaseapp.com/" target="_blank">link</a>.</p>
   <p>Read more about iota.lib.js API: <a href="https://www.npmjs.com/package/iota.lib.js" target="_blank">here</a>.</p>
</script>
